<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 10 Intellectual Debt | The Tidynomicon</title>
  <meta name="description" content="Chapter 10 Intellectual Debt | The Tidynomicon">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 10 Intellectual Debt | The Tidynomicon" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapter 10 Intellectual Debt | The Tidynomicon" />
  <meta name="github-repo" content="gvwilson/tidynomicon" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 Intellectual Debt | The Tidynomicon" />
  
  <meta name="twitter:description" content="Chapter 10 Intellectual Debt | The Tidynomicon" />
  

<meta name="author" content="Greg Wilson">


<meta name="date" content="2019-05-07">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="oop.html">
<link rel="next" href="projects.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The Tidynomicon</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#s:index-personas"><i class="fa fa-check"></i><b>1.1</b> Who are these lessons for?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>2</b> Values and Vectors</a><ul>
<li class="chapter" data-level="2.1" data-path="basics.html"><a href="basics.html#questions"><i class="fa fa-check"></i><b>2.1</b> Questions</a></li>
<li class="chapter" data-level="2.2" data-path="basics.html"><a href="basics.html#learning-objectives"><i class="fa fa-check"></i><b>2.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="2.3" data-path="basics.html"><a href="basics.html#how-do-i-say-hello"><i class="fa fa-check"></i><b>2.3</b> How do I say hello?</a></li>
<li class="chapter" data-level="2.4" data-path="basics.html"><a href="basics.html#how-do-i-add-numbers"><i class="fa fa-check"></i><b>2.4</b> How do I add numbers?</a></li>
<li class="chapter" data-level="2.5" data-path="basics.html"><a href="basics.html#how-do-i-store-many-numbers-together"><i class="fa fa-check"></i><b>2.5</b> How do I store many numbers together?</a></li>
<li class="chapter" data-level="2.6" data-path="basics.html"><a href="basics.html#how-do-i-index-a-vector"><i class="fa fa-check"></i><b>2.6</b> How do I index a vector?</a></li>
<li class="chapter" data-level="2.7" data-path="basics.html"><a href="basics.html#how-do-i-create-new-vectors-from-old"><i class="fa fa-check"></i><b>2.7</b> How do I create new vectors from old?</a></li>
<li class="chapter" data-level="2.8" data-path="basics.html"><a href="basics.html#how-else-does-r-represent-the-absence-of-data"><i class="fa fa-check"></i><b>2.8</b> How else does R represent the absence of data?</a></li>
<li class="chapter" data-level="2.9" data-path="basics.html"><a href="basics.html#key-points"><i class="fa fa-check"></i><b>2.9</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="indexing.html"><a href="indexing.html"><i class="fa fa-check"></i><b>3</b> Indexing</a><ul>
<li class="chapter" data-level="3.1" data-path="indexing.html"><a href="indexing.html#questions-1"><i class="fa fa-check"></i><b>3.1</b> Questions</a></li>
<li class="chapter" data-level="3.2" data-path="indexing.html"><a href="indexing.html#learning-objectives-1"><i class="fa fa-check"></i><b>3.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="3.3" data-path="indexing.html"><a href="indexing.html#how-can-i-store-a-mix-of-different-types-of-objects"><i class="fa fa-check"></i><b>3.3</b> How can I store a mix of different types of objects?</a></li>
<li class="chapter" data-level="3.4" data-path="indexing.html"><a href="indexing.html#what-is-the-difference-between-and"><i class="fa fa-check"></i><b>3.4</b> What is the difference between <code>[</code> and <code>[[</code>?</a></li>
<li class="chapter" data-level="3.5" data-path="indexing.html"><a href="indexing.html#how-can-i-access-elements-by-name"><i class="fa fa-check"></i><b>3.5</b> How can I access elements by name?</a></li>
<li class="chapter" data-level="3.6" data-path="indexing.html"><a href="indexing.html#how-can-i-create-and-index-a-matrix"><i class="fa fa-check"></i><b>3.6</b> How can I create and index a matrix?</a></li>
<li class="chapter" data-level="3.7" data-path="indexing.html"><a href="indexing.html#key-points-1"><i class="fa fa-check"></i><b>3.7</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="control.html"><a href="control.html"><i class="fa fa-check"></i><b>4</b> Control Flow</a><ul>
<li class="chapter" data-level="4.1" data-path="control.html"><a href="control.html#questions-2"><i class="fa fa-check"></i><b>4.1</b> Questions</a></li>
<li class="chapter" data-level="4.2" data-path="control.html"><a href="control.html#learning-objectives-2"><i class="fa fa-check"></i><b>4.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="4.3" data-path="control.html"><a href="control.html#how-do-i-choose-and-repeat-things"><i class="fa fa-check"></i><b>4.3</b> How do I choose and repeat things?</a></li>
<li class="chapter" data-level="4.4" data-path="control.html"><a href="control.html#how-can-i-express-a-range-of-values-in-r"><i class="fa fa-check"></i><b>4.4</b> How can I express a range of values in R?</a></li>
<li class="chapter" data-level="4.5" data-path="control.html"><a href="control.html#how-can-i-use-a-vector-in-a-conditional-statement"><i class="fa fa-check"></i><b>4.5</b> How can I use a vector in a conditional statement?</a></li>
<li class="chapter" data-level="4.6" data-path="control.html"><a href="control.html#how-do-i-create-and-call-functions"><i class="fa fa-check"></i><b>4.6</b> How do I create and call functions?</a></li>
<li class="chapter" data-level="4.7" data-path="control.html"><a href="control.html#how-can-i-write-a-function-that-takes-a-varying-number-of-arguments"><i class="fa fa-check"></i><b>4.7</b> How can I write a function that takes a varying number of arguments?</a></li>
<li class="chapter" data-level="4.8" data-path="control.html"><a href="control.html#how-can-i-provide-default-values-for-arguments"><i class="fa fa-check"></i><b>4.8</b> How can I provide default values for arguments?</a></li>
<li class="chapter" data-level="4.9" data-path="control.html"><a href="control.html#how-can-i-hide-the-value-that-r-returns"><i class="fa fa-check"></i><b>4.9</b> How can I hide the value that R returns?</a></li>
<li class="chapter" data-level="4.10" data-path="control.html"><a href="control.html#how-can-i-assign-to-a-global-variable-from-inside-a-function"><i class="fa fa-check"></i><b>4.10</b> How can I assign to a global variable from inside a function?</a></li>
<li class="chapter" data-level="4.11" data-path="control.html"><a href="control.html#key-points-2"><i class="fa fa-check"></i><b>4.11</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>5</b> The Tidyverse</a><ul>
<li class="chapter" data-level="5.1" data-path="tidyverse.html"><a href="tidyverse.html#questions-3"><i class="fa fa-check"></i><b>5.1</b> Questions</a></li>
<li class="chapter" data-level="5.2" data-path="tidyverse.html"><a href="tidyverse.html#learning-objectives-3"><i class="fa fa-check"></i><b>5.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="5.3" data-path="tidyverse.html"><a href="tidyverse.html#how-do-i-read-data"><i class="fa fa-check"></i><b>5.3</b> How do I read data?</a></li>
<li class="chapter" data-level="5.4" data-path="tidyverse.html"><a href="tidyverse.html#how-do-i-inspect-data"><i class="fa fa-check"></i><b>5.4</b> How do I inspect data?</a></li>
<li class="chapter" data-level="5.5" data-path="tidyverse.html"><a href="tidyverse.html#how-do-i-index-rows-and-columns"><i class="fa fa-check"></i><b>5.5</b> How do I index rows and columns?</a></li>
<li class="chapter" data-level="5.6" data-path="tidyverse.html"><a href="tidyverse.html#how-do-i-calculate-basic-statistics"><i class="fa fa-check"></i><b>5.6</b> How do I calculate basic statistics?</a></li>
<li class="chapter" data-level="5.7" data-path="tidyverse.html"><a href="tidyverse.html#how-do-i-filter-data"><i class="fa fa-check"></i><b>5.7</b> How do I filter data?</a></li>
<li class="chapter" data-level="5.8" data-path="tidyverse.html"><a href="tidyverse.html#how-do-i-write-tidy-code"><i class="fa fa-check"></i><b>5.8</b> How do I write tidy code?</a></li>
<li class="chapter" data-level="5.9" data-path="tidyverse.html"><a href="tidyverse.html#modeling"><i class="fa fa-check"></i><b>5.9</b> Modeling</a></li>
<li class="chapter" data-level="5.10" data-path="tidyverse.html"><a href="tidyverse.html#plotting"><i class="fa fa-check"></i><b>5.10</b> Plotting</a></li>
<li class="chapter" data-level="5.11" data-path="tidyverse.html"><a href="tidyverse.html#key-points-3"><i class="fa fa-check"></i><b>5.11</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="cleanup.html"><a href="cleanup.html"><i class="fa fa-check"></i><b>6</b> Cleaning Up Data</a><ul>
<li class="chapter" data-level="6.1" data-path="cleanup.html"><a href="cleanup.html#questions-4"><i class="fa fa-check"></i><b>6.1</b> Questions</a></li>
<li class="chapter" data-level="6.2" data-path="cleanup.html"><a href="cleanup.html#learning-objectives-4"><i class="fa fa-check"></i><b>6.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="6.3" data-path="cleanup.html"><a href="cleanup.html#how-do-i-inspect-the-raw-data"><i class="fa fa-check"></i><b>6.3</b> How do I inspect the raw data?</a></li>
<li class="chapter" data-level="6.4" data-path="cleanup.html"><a href="cleanup.html#how-do-i-tidy-the-data"><i class="fa fa-check"></i><b>6.4</b> How do I tidy the data?</a></li>
<li class="chapter" data-level="6.5" data-path="cleanup.html"><a href="cleanup.html#key-points-4"><i class="fa fa-check"></i><b>6.5</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="nse.html"><a href="nse.html"><i class="fa fa-check"></i><b>7</b> Non-Standard Evaluation</a><ul>
<li class="chapter" data-level="7.1" data-path="nse.html"><a href="nse.html#questions-5"><i class="fa fa-check"></i><b>7.1</b> Questions</a></li>
<li class="chapter" data-level="7.2" data-path="nse.html"><a href="nse.html#learning-objectives-5"><i class="fa fa-check"></i><b>7.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="7.3" data-path="nse.html"><a href="nse.html#how-does-python-evaluate-function-calls"><i class="fa fa-check"></i><b>7.3</b> How does Python evaluate function calls?</a></li>
<li class="chapter" data-level="7.4" data-path="nse.html"><a href="nse.html#how-does-r-evaluate-the-same-kind-of-thing"><i class="fa fa-check"></i><b>7.4</b> How does R evaluate the same kind of thing?</a></li>
<li class="chapter" data-level="7.5" data-path="nse.html"><a href="nse.html#why-is-lazy-evaluation-useful"><i class="fa fa-check"></i><b>7.5</b> Why is lazy evaluation useful?</a></li>
<li class="chapter" data-level="7.6" data-path="nse.html"><a href="nse.html#what-is-tidy-evaluation"><i class="fa fa-check"></i><b>7.6</b> What is tidy evaluation?</a></li>
<li class="chapter" data-level="7.7" data-path="nse.html"><a href="nse.html#what-have-we-learned"><i class="fa fa-check"></i><b>7.7</b> What have we learned?</a></li>
<li class="chapter" data-level="7.8" data-path="nse.html"><a href="nse.html#key-points-5"><i class="fa fa-check"></i><b>7.8</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="errors.html"><a href="errors.html"><i class="fa fa-check"></i><b>8</b> Handling Errors</a><ul>
<li class="chapter" data-level="8.1" data-path="errors.html"><a href="errors.html#questions-6"><i class="fa fa-check"></i><b>8.1</b> Questions</a></li>
<li class="chapter" data-level="8.2" data-path="errors.html"><a href="errors.html#learning-objectives-6"><i class="fa fa-check"></i><b>8.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="8.3" data-path="errors.html"><a href="errors.html#key-points-6"><i class="fa fa-check"></i><b>8.3</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="oop.html"><a href="oop.html"><i class="fa fa-check"></i><b>9</b> Object-Oriented Programming</a><ul>
<li class="chapter" data-level="9.1" data-path="oop.html"><a href="oop.html#questions-7"><i class="fa fa-check"></i><b>9.1</b> Questions</a></li>
<li class="chapter" data-level="9.2" data-path="oop.html"><a href="oop.html#learning-objectives-7"><i class="fa fa-check"></i><b>9.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="9.3" data-path="oop.html"><a href="oop.html#what-are-attributes"><i class="fa fa-check"></i><b>9.3</b> What are attributes?</a></li>
<li class="chapter" data-level="9.4" data-path="oop.html"><a href="oop.html#how-are-classes-represented"><i class="fa fa-check"></i><b>9.4</b> How are classes represented?</a></li>
<li class="chapter" data-level="9.5" data-path="oop.html"><a href="oop.html#how-does-inheritance-work"><i class="fa fa-check"></i><b>9.5</b> How does inheritance work?</a></li>
<li class="chapter" data-level="9.6" data-path="oop.html"><a href="oop.html#key-points-7"><i class="fa fa-check"></i><b>9.6</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="debt.html"><a href="debt.html"><i class="fa fa-check"></i><b>10</b> Intellectual Debt</a><ul>
<li class="chapter" data-level="10.1" data-path="debt.html"><a href="debt.html#questions-8"><i class="fa fa-check"></i><b>10.1</b> Questions</a></li>
<li class="chapter" data-level="10.2" data-path="debt.html"><a href="debt.html#learning-objectives-8"><i class="fa fa-check"></i><b>10.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="10.3" data-path="debt.html"><a href="debt.html#why-shouldnt-i-use-setwd"><i class="fa fa-check"></i><b>10.3</b> Why shouldn’t I use <code>setwd</code>?</a></li>
<li class="chapter" data-level="10.4" data-path="debt.html"><a href="debt.html#how-do-i-write-formulas"><i class="fa fa-check"></i><b>10.4</b> How do I write formulas?</a></li>
<li class="chapter" data-level="10.5" data-path="debt.html"><a href="debt.html#what-the-hell-are-factors"><i class="fa fa-check"></i><b>10.5</b> What the hell are factors?</a></li>
<li class="chapter" data-level="10.6" data-path="debt.html"><a href="debt.html#how-do-i-refer-to-various-arguments-in-a-pipeline"><i class="fa fa-check"></i><b>10.6</b> How do I refer to various arguments in a pipeline?</a></li>
<li class="chapter" data-level="10.7" data-path="debt.html"><a href="debt.html#how-does-r-give-the-appearance-of-immutable-data"><i class="fa fa-check"></i><b>10.7</b> How does R give the appearance of immutable data?</a></li>
<li class="chapter" data-level="10.8" data-path="debt.html"><a href="debt.html#what-else-should-i-worry-about"><i class="fa fa-check"></i><b>10.8</b> What else should I worry about?</a></li>
<li class="chapter" data-level="10.9" data-path="debt.html"><a href="debt.html#key-points-8"><i class="fa fa-check"></i><b>10.9</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="projects.html"><a href="projects.html"><i class="fa fa-check"></i><b>11</b> Projects</a><ul>
<li class="chapter" data-level="11.1" data-path="projects.html"><a href="projects.html#questions-9"><i class="fa fa-check"></i><b>11.1</b> Questions</a></li>
<li class="chapter" data-level="11.2" data-path="projects.html"><a href="projects.html#learning-objectives-9"><i class="fa fa-check"></i><b>11.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="11.3" data-path="projects.html"><a href="projects.html#whats-in-an-r-package"><i class="fa fa-check"></i><b>11.3</b> What’s in an R package?</a></li>
<li class="chapter" data-level="11.4" data-path="projects.html"><a href="projects.html#how-do-i-create-a-package"><i class="fa fa-check"></i><b>11.4</b> How do I create a package?</a></li>
<li class="chapter" data-level="11.5" data-path="projects.html"><a href="projects.html#key-points-9"><i class="fa fa-check"></i><b>11.5</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="testing.html"><a href="testing.html"><i class="fa fa-check"></i><b>12</b> Testing</a><ul>
<li class="chapter" data-level="12.1" data-path="testing.html"><a href="testing.html#questions-10"><i class="fa fa-check"></i><b>12.1</b> Questions</a></li>
<li class="chapter" data-level="12.2" data-path="testing.html"><a href="testing.html#learning-objectives-10"><i class="fa fa-check"></i><b>12.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="12.3" data-path="testing.html"><a href="testing.html#what-should-i-know-about-testing-in-general"><i class="fa fa-check"></i><b>12.3</b> What should I know about testing in general?</a></li>
<li class="chapter" data-level="12.4" data-path="testing.html"><a href="testing.html#s:testing-warmup"><i class="fa fa-check"></i><b>12.4</b> How can I write a few simple tests?</a></li>
<li class="chapter" data-level="12.5" data-path="testing.html"><a href="testing.html#how-can-i-check-data-transformation"><i class="fa fa-check"></i><b>12.5</b> How can I check data transformation?</a><ul>
<li class="chapter" data-level="12.5.1" data-path="testing.html"><a href="testing.html#how-can-i-reorganize-code-to-make-it-more-testable"><i class="fa fa-check"></i><b>12.5.1</b> How can I reorganize code to make it more testable?</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="testing.html"><a href="testing.html#key-points-10"><i class="fa fa-check"></i><b>12.6</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="shiny.html"><a href="shiny.html"><i class="fa fa-check"></i><b>13</b> Web Applications</a><ul>
<li class="chapter" data-level="13.1" data-path="shiny.html"><a href="shiny.html#questions-11"><i class="fa fa-check"></i><b>13.1</b> Questions</a></li>
<li class="chapter" data-level="13.2" data-path="shiny.html"><a href="shiny.html#learning-objectives-11"><i class="fa fa-check"></i><b>13.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="13.3" data-path="shiny.html"><a href="shiny.html#how-do-i-set-up-a-simple-application"><i class="fa fa-check"></i><b>13.3</b> How do I set up a simple application?</a></li>
<li class="chapter" data-level="13.4" data-path="shiny.html"><a href="shiny.html#how-do-i-create-a-user-interface"><i class="fa fa-check"></i><b>13.4</b> How do I create a user interface?</a></li>
<li class="chapter" data-level="13.5" data-path="shiny.html"><a href="shiny.html#how-do-i-create-a-server"><i class="fa fa-check"></i><b>13.5</b> How do I create a server?</a></li>
<li class="chapter" data-level="13.6" data-path="shiny.html"><a href="shiny.html#how-do-i-run-my-application"><i class="fa fa-check"></i><b>13.6</b> How do I run my application?</a></li>
<li class="chapter" data-level="13.7" data-path="shiny.html"><a href="shiny.html#how-can-i-improve-my-user-interface"><i class="fa fa-check"></i><b>13.7</b> How can I improve my user interface?</a></li>
<li class="chapter" data-level="13.8" data-path="shiny.html"><a href="shiny.html#how-can-i-display-the-data-in-a-file"><i class="fa fa-check"></i><b>13.8</b> How can I display the data in a file?</a></li>
<li class="chapter" data-level="13.9" data-path="shiny.html"><a href="shiny.html#how-can-i-break-circular-dependencies"><i class="fa fa-check"></i><b>13.9</b> How can I break circular dependencies?</a></li>
<li class="chapter" data-level="13.10" data-path="shiny.html"><a href="shiny.html#how-can-i-control-how-the-user-interface-is-rendered"><i class="fa fa-check"></i><b>13.10</b> How can I control how the user interface is rendered?</a></li>
<li class="chapter" data-level="13.11" data-path="shiny.html"><a href="shiny.html#key-points-11"><i class="fa fa-check"></i><b>13.11</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="python.html"><a href="python.html"><i class="fa fa-check"></i><b>14</b> Using Python</a><ul>
<li class="chapter" data-level="14.1" data-path="python.html"><a href="python.html#questions-12"><i class="fa fa-check"></i><b>14.1</b> Questions</a></li>
<li class="chapter" data-level="14.2" data-path="python.html"><a href="python.html#learning-objectives-12"><i class="fa fa-check"></i><b>14.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="14.3" data-path="python.html"><a href="python.html#how-can-i-access-data-across-languages"><i class="fa fa-check"></i><b>14.3</b> How can I access data across languages?</a></li>
<li class="chapter" data-level="14.4" data-path="python.html"><a href="python.html#how-can-i-call-functions-across-languages"><i class="fa fa-check"></i><b>14.4</b> How can I call functions across languages?</a></li>
<li class="chapter" data-level="14.5" data-path="python.html"><a href="python.html#key-points-12"><i class="fa fa-check"></i><b>14.5</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="license.html"><a href="license.html"><i class="fa fa-check"></i><b>A</b> License</a></li>
<li class="chapter" data-level="B" data-path="code-of-conduct.html"><a href="code-of-conduct.html"><i class="fa fa-check"></i><b>B</b> Code of Conduct</a><ul>
<li class="chapter" data-level="B.1" data-path="code-of-conduct.html"><a href="code-of-conduct.html#our-standards"><i class="fa fa-check"></i><b>B.1</b> Our Standards</a></li>
<li class="chapter" data-level="B.2" data-path="code-of-conduct.html"><a href="code-of-conduct.html#our-responsibilities"><i class="fa fa-check"></i><b>B.2</b> Our Responsibilities</a></li>
<li class="chapter" data-level="B.3" data-path="code-of-conduct.html"><a href="code-of-conduct.html#scope"><i class="fa fa-check"></i><b>B.3</b> Scope</a></li>
<li class="chapter" data-level="B.4" data-path="code-of-conduct.html"><a href="code-of-conduct.html#enforcement"><i class="fa fa-check"></i><b>B.4</b> Enforcement</a></li>
<li class="chapter" data-level="B.5" data-path="code-of-conduct.html"><a href="code-of-conduct.html#attribution"><i class="fa fa-check"></i><b>B.5</b> Attribution</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="citation.html"><a href="citation.html"><i class="fa fa-check"></i><b>C</b> Citation</a></li>
<li class="chapter" data-level="D" data-path="contributing.html"><a href="contributing.html"><i class="fa fa-check"></i><b>D</b> Contributing</a></li>
<li class="chapter" data-level="E" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i><b>E</b> Glossary</a></li>
<li class="chapter" data-level="F" data-path="objectives.html"><a href="objectives.html"><i class="fa fa-check"></i><b>F</b> Learning Objectives</a><ul>
<li class="chapter" data-level="F.1" data-path="objectives.html"><a href="objectives.html#values-and-vectors"><i class="fa fa-check"></i><b>F.1</b> Values and Vectors</a></li>
<li class="chapter" data-level="F.2" data-path="objectives.html"><a href="objectives.html#indexing-1"><i class="fa fa-check"></i><b>F.2</b> Indexing</a></li>
<li class="chapter" data-level="F.3" data-path="objectives.html"><a href="objectives.html#control-flow"><i class="fa fa-check"></i><b>F.3</b> Control Flow</a></li>
<li class="chapter" data-level="F.4" data-path="objectives.html"><a href="objectives.html#the-tidyverse"><i class="fa fa-check"></i><b>F.4</b> The Tidyverse</a></li>
<li class="chapter" data-level="F.5" data-path="objectives.html"><a href="objectives.html#cleaning-up-data"><i class="fa fa-check"></i><b>F.5</b> Cleaning Up Data</a></li>
<li class="chapter" data-level="F.6" data-path="objectives.html"><a href="objectives.html#non-standard-evaluation"><i class="fa fa-check"></i><b>F.6</b> Non-Standard Evaluation</a></li>
<li class="chapter" data-level="F.7" data-path="objectives.html"><a href="objectives.html#handling-errors"><i class="fa fa-check"></i><b>F.7</b> Handling Errors</a></li>
<li class="chapter" data-level="F.8" data-path="objectives.html"><a href="objectives.html#object-oriented-programming"><i class="fa fa-check"></i><b>F.8</b> Object-Oriented Programming</a></li>
<li class="chapter" data-level="F.9" data-path="objectives.html"><a href="objectives.html#intellectual-debt"><i class="fa fa-check"></i><b>F.9</b> Intellectual Debt</a></li>
<li class="chapter" data-level="F.10" data-path="objectives.html"><a href="objectives.html#projects-1"><i class="fa fa-check"></i><b>F.10</b> Projects</a></li>
<li class="chapter" data-level="F.11" data-path="objectives.html"><a href="objectives.html#testing-1"><i class="fa fa-check"></i><b>F.11</b> Testing</a></li>
<li class="chapter" data-level="F.12" data-path="objectives.html"><a href="objectives.html#web-applications-with-shiny"><i class="fa fa-check"></i><b>F.12</b> Web Applications with Shiny</a></li>
<li class="chapter" data-level="F.13" data-path="objectives.html"><a href="objectives.html#reticulate"><i class="fa fa-check"></i><b>F.13</b> Reticulate</a></li>
</ul></li>
<li class="chapter" data-level="G" data-path="keypoints.html"><a href="keypoints.html"><i class="fa fa-check"></i><b>G</b> Key Points</a><ul>
<li class="chapter" data-level="G.1" data-path="keypoints.html"><a href="keypoints.html#values-and-vectors-1"><i class="fa fa-check"></i><b>G.1</b> Values and Vectors</a></li>
<li class="chapter" data-level="G.2" data-path="keypoints.html"><a href="keypoints.html#indexing-2"><i class="fa fa-check"></i><b>G.2</b> Indexing</a></li>
<li class="chapter" data-level="G.3" data-path="keypoints.html"><a href="keypoints.html#control-flow-1"><i class="fa fa-check"></i><b>G.3</b> Control Flow</a></li>
<li class="chapter" data-level="G.4" data-path="keypoints.html"><a href="keypoints.html#the-tidyverse-1"><i class="fa fa-check"></i><b>G.4</b> The Tidyverse</a></li>
<li class="chapter" data-level="G.5" data-path="keypoints.html"><a href="keypoints.html#cleaning-up-data-1"><i class="fa fa-check"></i><b>G.5</b> Cleaning Up Data</a></li>
<li class="chapter" data-level="G.6" data-path="keypoints.html"><a href="keypoints.html#non-standard-evaluation-1"><i class="fa fa-check"></i><b>G.6</b> Non-Standard Evaluation</a></li>
<li class="chapter" data-level="G.7" data-path="keypoints.html"><a href="keypoints.html#handling-errors-1"><i class="fa fa-check"></i><b>G.7</b> Handling Errors</a></li>
<li class="chapter" data-level="G.8" data-path="keypoints.html"><a href="keypoints.html#object-oriented-programming-1"><i class="fa fa-check"></i><b>G.8</b> Object-Oriented Programming</a></li>
<li class="chapter" data-level="G.9" data-path="keypoints.html"><a href="keypoints.html#intellectual-debt-1"><i class="fa fa-check"></i><b>G.9</b> Intellectual Debt</a></li>
<li class="chapter" data-level="G.10" data-path="keypoints.html"><a href="keypoints.html#projects-2"><i class="fa fa-check"></i><b>G.10</b> Projects</a></li>
<li class="chapter" data-level="G.11" data-path="keypoints.html"><a href="keypoints.html#testing-2"><i class="fa fa-check"></i><b>G.11</b> Testing</a></li>
<li class="chapter" data-level="G.12" data-path="keypoints.html"><a href="keypoints.html#web-applications-with-shiny-1"><i class="fa fa-check"></i><b>G.12</b> Web Applications with Shiny</a></li>
<li class="chapter" data-level="G.13" data-path="keypoints.html"><a href="keypoints.html#reticulate-1"><i class="fa fa-check"></i><b>G.13</b> Reticulate</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The Tidynomicon</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="debt" class="section level1">
<h1><span class="header-section-number">Chapter 10</span> Intellectual Debt</h1>
<div id="questions-8" class="section level2">
<h2><span class="header-section-number">10.1</span> Questions</h2>
<ul>
<li>What grievous sin can I most easily avoid when using R?</li>
<li>How can I pipeline functions when the incoming data doesn’t belong in the first parameter’s position?</li>
<li>Why does assigning to elements of data structures sometimes appear not to change them?</li>
<li>How does R handle errors, and how can I handle them myself?</li>
</ul>
</div>
<div id="learning-objectives-8" class="section level2">
<h2><span class="header-section-number">10.2</span> Learning Objectives</h2>
<ul>
<li>Explain what the formula operator <code>~</code> was created for and what other uses it has.</li>
<li>Describe and use <code>.</code>, <code>.x</code>, <code>.y,</code>..1<code>,</code>..2`, and other convenience parameters.</li>
<li>Define copy-on-modify and explain its use in R.</li>
</ul>
<p>We have accumulated some intellectual debt in the previous lessons,
and we should clear some of before we go on to new topics.</p>
</div>
<div id="why-shouldnt-i-use-setwd" class="section level2">
<h2><span class="header-section-number">10.3</span> Why shouldn’t I use <code>setwd</code>?</h2>
<p>Because <a href="https://www.tidyverse.org/articles/2017/12/workflow-vs-script/">reasons</a>.</p>
<p><strong>But…</strong></p>
<p>No. Use the <a href="https://cran.r-project.org/web/packages/here/index.html">here package</a>.</p>
</div>
<div id="how-do-i-write-formulas" class="section level2">
<h2><span class="header-section-number">10.4</span> How do I write formulas?</h2>
<p>One feature of R that doesn’t have an exact parallel in Python
is the formula operator <code>~</code> (tilde).
Its original (and still most common) purpose is to provide a convenient syntax
for expressing the formulas used in fitting linear regression models.
The basic format of these formulas is <code>response ~ predictor</code>,
where <code>response</code> and <code>predictor</code> depend on the variables in the program.
For example, <code>Y ~ X</code> means,
“<code>Y</code> is modeled as a function of <code>X</code>”,
so <code>lm(Y ~ X)</code> means “fit a linear model that regresses <code>Y</code> on <code>X</code>”.</p>
<p>What makes <code>~</code> work is lazy evaluation:
what actually gets passed to <code>lm</code> in the example above is a formula object
that stores the expression representing the left side of the <code>~</code>,
the expression representing the right side,
and the environment in which they are to be evaluated.
This means that we can write something like:</p>
<pre class="sourceCode r"><code class="sourceCode r">fit &lt;-<span class="st"> </span><span class="kw">lm</span>(Z <span class="op">~</span><span class="st"> </span>X <span class="op">+</span><span class="st"> </span>Y)</code></pre>
<p>to mean “fit <code>Z</code> to both <code>X</code> and <code>Y</code>”, or:</p>
<pre class="sourceCode r"><code class="sourceCode r">fit &lt;-<span class="st"> </span><span class="kw">lm</span>(Z <span class="op">~</span><span class="st"> </span>. <span class="op">-</span><span class="st"> </span>X, <span class="dt">data =</span> D)</code></pre>
<p>to mean “fit <code>Z</code> to all the variables in the data frame <code>D</code> <em>except</em> the variable <code>X</code>.”
(Here, we use the shorthand <code>.</code> to mean “the data being manipulated”.)</p>
<p>But <code>~</code> can also be used as a unary operator,
because its true effect is to delay computation.
For example,
we can use it in the function <code>tribble</code> to give names to columns
as we create a tibble on the fly:</p>
<pre class="sourceCode r"><code class="sourceCode r">temp &lt;-<span class="st"> </span><span class="kw">tribble</span>(
  <span class="op">~</span>left, <span class="op">~</span>right,
  <span class="dv">1</span>,     <span class="dv">10</span>,
  <span class="dv">2</span>,     <span class="dv">20</span>
)
temp</code></pre>
<pre><code># A tibble: 2 x 2
   left right
  &lt;dbl&gt; &lt;dbl&gt;
1     1    10
2     2    20</code></pre>
<p>Used cautiously and with restraint,
lazy evaluation allows us to accomplish marvels.
Used unwisely—well,
there’s no reason for us to dwell on that,
particularly not after what happened to poor Higgins…</p>
</div>
<div id="what-the-hell-are-factors" class="section level2">
<h2><span class="header-section-number">10.5</span> What the hell are factors?</h2>
<p>Another feature of R that doesn’t have an exact analog in Python is <strong>factors</strong>.
In statistics, a factor is a categorical variable such as “flavor”,
which can be “vanilla”, “chocolate”, “strawberry”, or “mustard”.
Factors can be represented as strings,
but storing the same string many times wastes space and is inefficient
(since comparing strings takes longer than comparing numbers).
What R and other languages therefore do is store each string once
and associate it with a numeric key,
so that internally, “mustard” is the number 4 in the lookup table for “flavor”,
but is presented as “mustard” rather than 4.
(Just to keep us on our toes,
R allows factors to be either ordered or unordered.)</p>
<p>This is useful, but brings with it some problems:</p>
<ol style="list-style-type: decimal">
<li>On the statistical side,
it encourages people to put messy reality into tidy but misleading boxes.
For example, it’s unfortunately still common for forms to require people to identify themselves
as either “male” or “female”,
which is <a href="https://www.quora.com/Scientifically-how-many-sexes-genders-are-there">scientifically</a>
<a href="https://www.joshuakennon.com/the-six-common-biological-sexes-in-humans/">incorrect</a>.
Similarly, census forms that ask questions about racial or ethnic identity often leave people scratching their heads,
since they don’t fit into any of the categories on offer.</li>
<li>On the computational side,
some functions in R automatically convert strings to factors by default.
This makes sense when working with statistical data—in most cases,
a column in which the same strings are repeated many times is categorical—but
it is usually not the right choice in other situations.
This has surprised enough people the years that the tidyverse goes the other way
and only creates factors when asked to.</li>
</ol>
<p>Let’s work through a small example.
Suppose we’ve read a CSV file and wound up with this table:</p>
<pre class="sourceCode r"><code class="sourceCode r">raw &lt;-<span class="st"> </span><span class="kw">tribble</span>(
  <span class="op">~</span>person, <span class="op">~</span>flavor, <span class="op">~</span>ranking,
  <span class="st">&quot;Lhawang&quot;</span>, <span class="st">&quot;strawberry&quot;</span>, <span class="fl">1.7</span>,
  <span class="st">&quot;Lhawang&quot;</span>, <span class="st">&quot;chocolate&quot;</span>,  <span class="fl">2.5</span>,
  <span class="st">&quot;Lhawang&quot;</span>, <span class="st">&quot;mustard&quot;</span>,    <span class="fl">0.2</span>,
  <span class="st">&quot;Khadee&quot;</span>,  <span class="st">&quot;strawberry&quot;</span>, <span class="fl">2.1</span>,
  <span class="st">&quot;Khadee&quot;</span>, <span class="st">&quot;chocolate&quot;</span>,   <span class="fl">2.4</span>,
  <span class="st">&quot;Khadee&quot;</span>, <span class="st">&quot;vanilla&quot;</span>,     <span class="fl">3.9</span>,
  <span class="st">&quot;Haddad&quot;</span>, <span class="st">&quot;strawberry&quot;</span>,  <span class="fl">1.8</span>,
  <span class="st">&quot;Haddad&quot;</span>, <span class="st">&quot;vanilla&quot;</span>,     <span class="fl">2.1</span>
)
raw</code></pre>
<pre><code># A tibble: 8 x 3
  person  flavor     ranking
  &lt;chr&gt;   &lt;chr&gt;        &lt;dbl&gt;
1 Lhawang strawberry     1.7
2 Lhawang chocolate      2.5
3 Lhawang mustard        0.2
4 Khadee  strawberry     2.1
5 Khadee  chocolate      2.4
6 Khadee  vanilla        3.9
7 Haddad  strawberry     1.8
8 Haddad  vanilla        2.1</code></pre>
<p>Let’s aggregate using flavor values so that we can check our factor-based aggregating later:</p>
<pre class="sourceCode r"><code class="sourceCode r">raw <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(flavor) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">number =</span> <span class="kw">n</span>(), <span class="dt">average =</span> <span class="kw">mean</span>(ranking))</code></pre>
<pre><code># A tibble: 4 x 3
  flavor     number average
  &lt;chr&gt;       &lt;int&gt;   &lt;dbl&gt;
1 chocolate       2    2.45
2 mustard         1    0.2 
3 strawberry      3    1.87
4 vanilla         2    3   </code></pre>
<p>It probably doesn’t make sense to turn the <code>person</code> column into factors,
since names are actually character strings,
but the <code>flavor</code> column is a good candidate:</p>
<pre class="sourceCode r"><code class="sourceCode r">raw &lt;-<span class="st"> </span><span class="kw">mutate_at</span>(raw, <span class="kw">vars</span>(flavor), as.factor)
raw</code></pre>
<pre><code># A tibble: 8 x 3
  person  flavor     ranking
  &lt;chr&gt;   &lt;fct&gt;        &lt;dbl&gt;
1 Lhawang strawberry     1.7
2 Lhawang chocolate      2.5
3 Lhawang mustard        0.2
4 Khadee  strawberry     2.1
5 Khadee  chocolate      2.4
6 Khadee  vanilla        3.9
7 Haddad  strawberry     1.8
8 Haddad  vanilla        2.1</code></pre>
<p>We can still aggregate as we did before:</p>
<pre class="sourceCode r"><code class="sourceCode r">raw <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(flavor) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">number =</span> <span class="kw">n</span>(), <span class="dt">average =</span> <span class="kw">mean</span>(ranking))</code></pre>
<pre><code># A tibble: 4 x 3
  flavor     number average
  &lt;fct&gt;       &lt;int&gt;   &lt;dbl&gt;
1 chocolate       2    2.45
2 mustard         1    0.2 
3 strawberry      3    1.87
4 vanilla         2    3   </code></pre>
<p>We can also impose an ordering on the factor’s elements:</p>
<pre class="sourceCode r"><code class="sourceCode r">raw &lt;-<span class="st"> </span>raw <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">flavor =</span> <span class="kw">fct_relevel</span>(flavor, <span class="st">&quot;chocolate&quot;</span>, <span class="st">&quot;strawberry&quot;</span>, <span class="st">&quot;vanilla&quot;</span>, <span class="st">&quot;mustard&quot;</span>))</code></pre>
<p>This changes the order in which they are displayed after grouping:</p>
<pre class="sourceCode r"><code class="sourceCode r">raw <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(flavor) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">number =</span> <span class="kw">n</span>(), <span class="dt">average =</span> <span class="kw">mean</span>(ranking))</code></pre>
<pre><code># A tibble: 4 x 3
  flavor     number average
  &lt;fct&gt;       &lt;int&gt;   &lt;dbl&gt;
1 chocolate       2    2.45
2 strawberry      3    1.87
3 vanilla         2    3   
4 mustard         1    0.2 </code></pre>
<p>And also changes the order of bars in a bar chart:</p>
<pre class="sourceCode r"><code class="sourceCode r">raw <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(flavor) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">number =</span> <span class="kw">n</span>(), <span class="dt">average =</span> <span class="kw">mean</span>(ranking)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> flavor, <span class="dt">y =</span> average))</code></pre>
<p><img src="debt_files/figure-html/simple_bar_chart-1.png" width="672" /></p>
<p>To learn more about how factors work and how to use them when analyzing categorical data,
please see <a href="https://peerj.com/preprints/3163/">this paper</a> by McNamara and Horton.</p>
</div>
<div id="how-do-i-refer-to-various-arguments-in-a-pipeline" class="section level2">
<h2><span class="header-section-number">10.6</span> How do I refer to various arguments in a pipeline?</h2>
<p>When we put a function in a pipeline using <code>%&gt;%</code>,
that operator calls the function with the incoming data as the first argument,
so <code>data %&gt;% func(arg)</code> is the same as <code>func(data, arg)</code>.
This is fine when we want the incoming data to be the first argument,
but what if we want it to be second? Or third?</p>
<p>One possibility is to save the result so far in a temporary variable
and then start a second pipe:</p>
<pre class="sourceCode r"><code class="sourceCode r">data &lt;-<span class="st"> </span><span class="kw">tribble</span>(
  <span class="op">~</span>left, <span class="op">~</span>right,
  <span class="dv">1</span>,     <span class="ot">NA</span>,
  <span class="dv">2</span>,     <span class="dv">20</span>
)
empties &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">pmap_lgl</span>(<span class="cf">function</span>(...) {
    args &lt;-<span class="st"> </span><span class="kw">list</span>(...)
    <span class="kw">any</span>(<span class="kw">is.na</span>(args))
  })
data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">transmute</span>(<span class="dt">id =</span> <span class="kw">row_number</span>()) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(empties) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">pull</span>(id)</code></pre>
<pre><code>[1] 1</code></pre>
<p>This builds a logical vector <code>empties</code> with as many entries as <code>data</code> has rows,
then filters data according to which of the entries in the vector are <code>TRUE</code>.</p>
<p>A better practice is to use the parameter name <code>.</code>,
which means “the incoming data”.
In some functions (e.g., a two-argument function being used in <code>map</code>)
we can use <code>.x</code> and <code>.y</code>,
and for more arguments,
we can use <code>..1</code>, <code>..2</code>, and so on:</p>
<pre class="sourceCode r"><code class="sourceCode r">data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">pmap_lgl</span>(<span class="cf">function</span>(...) {
    args &lt;-<span class="st"> </span><span class="kw">list</span>(...)
    <span class="kw">any</span>(<span class="kw">is.na</span>(args))
  }) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">tibble</span>(<span class="dt">empty =</span> .) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">id =</span> <span class="kw">row_number</span>()) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(empty) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">pull</span>(id)</code></pre>
<pre><code>[1] 1</code></pre>
<p>In this model,
we create the logical vector,
then turn it into a tibble with one column called <code>empty</code>
(which is what <code>empty = .</code> does in <code>tibble</code>’s constructor).
After that,
it’s easy to add another column with row numbers,
filter,
and pull out the row numbers.</p>
<p>And while we’re here:
<code>row_number</code> doesn’t do what its name suggests.
We’re better off using <code>rowid_to_column</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r">data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rowid_to_column</span>()</code></pre>
<pre><code># A tibble: 2 x 3
  rowid  left right
  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
1     1     1    NA
2     2     2    20</code></pre>
</div>
<div id="how-does-r-give-the-appearance-of-immutable-data" class="section level2">
<h2><span class="header-section-number">10.7</span> How does R give the appearance of immutable data?</h2>
<p>Another feature of R that can surprise the unwary is <a href="glossary.html#copy-on-modify">copy-on-modify</a>,
which means that if two or more variables refer to the same data
and that data is updated via one variable,
R automatically makes a copy so that the other variable’s value doesn’t change.
Here’s a simple example:</p>
<pre class="sourceCode r"><code class="sourceCode r">first &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>)
second &lt;-<span class="st"> </span>first
<span class="kw">cat</span>(<span class="st">&quot;before modification, first is&quot;</span>, first, <span class="st">&quot;and second is&quot;</span>, second, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</code></pre>
<pre><code>before modification, first is red green blue and second is red green blue </code></pre>
<pre class="sourceCode r"><code class="sourceCode r">first[[<span class="dv">1</span>]] &lt;-<span class="st"> &quot;sulphurous&quot;</span>
<span class="kw">cat</span>(<span class="st">&quot;after modification, first is&quot;</span>, first, <span class="st">&quot;and second is&quot;</span>, second, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</code></pre>
<pre><code>after modification, first is sulphurous green blue and second is red green blue </code></pre>
<p>This is true of nested structures as well:</p>
<pre class="sourceCode r"><code class="sourceCode r">first &lt;-<span class="st"> </span><span class="kw">tribble</span>(
  <span class="op">~</span>left, <span class="op">~</span>right,
  <span class="dv">101</span>,   <span class="dv">202</span>,
  <span class="dv">303</span>,   <span class="dv">404</span>)
second &lt;-<span class="st"> </span>first
first<span class="op">$</span>left[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">999</span>
<span class="kw">cat</span>(<span class="st">&quot;after modification</span><span class="ch">\n</span><span class="st">&quot;</span>)</code></pre>
<pre><code>after modification</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">first</code></pre>
<pre><code># A tibble: 2 x 2
   left right
  &lt;dbl&gt; &lt;dbl&gt;
1   999   202
2   303   404</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">second</code></pre>
<pre><code># A tibble: 2 x 2
   left right
  &lt;dbl&gt; &lt;dbl&gt;
1   101   202
2   303   404</code></pre>
<p>In this case,
the entire <code>left</code> column of <code>first</code> has been replaced:
tibbles (and data frames) are stored as lists of vectors,
so changing any value in a column triggers construction of a new column vector.</p>
<p>We can watch this happen using the pryr library:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(pryr)</code></pre>
<pre><code>
Attaching package: &#39;pryr&#39;</code></pre>
<pre><code>The following object is masked from &#39;package:rlang&#39;:

    bytes</code></pre>
<pre><code>The following objects are masked from &#39;package:purrr&#39;:

    compose, partial</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">first &lt;-<span class="st"> </span><span class="kw">tribble</span>(
  <span class="op">~</span>left, <span class="op">~</span>right,
  <span class="dv">101</span>,   <span class="dv">202</span>,
  <span class="dv">303</span>,   <span class="dv">404</span>
)
<span class="kw">tracemem</span>(first)</code></pre>
<pre><code>[1] &quot;&lt;0x7ff799e7aa08&gt;&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">first<span class="op">$</span>left[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">999</span></code></pre>
<pre><code>tracemem[0x7ff799e7aa08 -&gt; 0x7ff799ecbb88]: eval eval withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local 
tracemem[0x7ff799ecbb88 -&gt; 0x7ff799ecbb08]: eval eval withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local 
tracemem[0x7ff799ecbb08 -&gt; 0x7ff799ecba88]: $&lt;-.data.frame $&lt;- eval eval withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local 
tracemem[0x7ff799ecba88 -&gt; 0x7ff799ecba48]: $&lt;-.data.frame $&lt;- eval eval withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local </code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">untracemem</span>(first)</code></pre>
<p>This rather cryptic output tell us the address of the tibble,
then notifies us of changes to the tibble and its contents.
We can accomplish something a little more readable using <code>address</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r">left &lt;-<span class="st"> </span>first<span class="op">$</span>left <span class="co"># alias</span>
<span class="kw">cat</span>(<span class="st">&quot;left column is initially at&quot;</span>, <span class="kw">address</span>(left), <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</code></pre>
<pre><code>left column is initially at 0x7ff799ecbb48 </code></pre>
<pre class="sourceCode r"><code class="sourceCode r">first<span class="op">$</span>left[[<span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="dv">888</span>
<span class="kw">cat</span>(<span class="st">&quot;after modification, the original column is still at&quot;</span>, <span class="kw">address</span>(left), <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</code></pre>
<pre><code>after modification, the original column is still at 0x7ff799ecbb48 </code></pre>
<pre class="sourceCode r"><code class="sourceCode r">temp &lt;-<span class="st"> </span>first<span class="op">$</span>left <span class="co"># another alias</span>
<span class="kw">cat</span>(<span class="st">&quot;but the first column of the tibble is at&quot;</span>, <span class="kw">address</span>(temp), <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</code></pre>
<pre><code>but the first column of the tibble is at 0x7ff798bbb688 </code></pre>
<p>(We need to use <a href="glossary.html#alias">aliases</a> because <code>address(first$left)</code> doesn’t work:
the argument needs to be a variable name.)</p>
<p>R’s copy-on-modify semantics is particularly important when writing functions.
If we modify an argument inside a function,
that modification isn’t visible to the caller,
so even functions that appear to modify structures usually don’t.
(“Usually”, because there are exceptions, but we must stray off the path to find them.)</p>
</div>
<div id="what-else-should-i-worry-about" class="section level2">
<h2><span class="header-section-number">10.8</span> What else should I worry about?</h2>
<p>Ralph Waldo Emerson once wrote, “A foolish consistency is the hobgoblin of little minds.”
Here, then, are few of the hobgoblins I’ve encountered on my journey through R.</p>
<p><strong>The <code>order</code> function:</strong>
The function <code>order</code> generates indices to pull values into place rather than push them,
i.e.,
<code>order(x)[i]</code> is the index in <code>x</code> of the element that belongs at location <code>i</code>.
For example:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">order</span>(<span class="kw">c</span>(<span class="st">&quot;g&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;t&quot;</span>, <span class="st">&quot;a&quot;</span>))</code></pre>
<pre><code>[1] 4 2 1 3</code></pre>
<p>shows that the value at location 4 (the <code>"a"</code>) belongs in the first spot of the vector;
it does <em>not</em> mean that the value in the first location (the <code>"g"</code>) belongs in location 4.</p>
<p><strong>One of a set of values:</strong>
The function <code>one_of</code> is a handy way to specify several values for matching
without complicated Boolean conditionals.
For example,
<code>gather(data, key = "year", value = "cases", one_of(c("1999", "2000")))</code>
collects data for the years 1999 and 2000.</p>
<p><strong>Functions and columns:</strong>
There’s a function called <code>n</code>.
It’s not the same thing as a column called <code>n</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">data &lt;-<span class="st"> </span><span class="kw">tribble</span>(
  <span class="op">~</span>a, <span class="op">~</span>n,
  <span class="dv">1</span>,  <span class="dv">10</span>,
  <span class="dv">2</span>,  <span class="dv">20</span>
)
data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">total =</span> <span class="kw">sum</span>(n))</code></pre>
<pre><code># A tibble: 1 x 1
  total
  &lt;dbl&gt;
1    30</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">total =</span> <span class="kw">sum</span>(<span class="kw">n</span>()))</code></pre>
<pre><code># A tibble: 1 x 1
  total
  &lt;int&gt;
1     2</code></pre>
</div>
<div id="key-points-8" class="section level2">
<h2><span class="header-section-number">10.9</span> Key Points</h2>
<ul>
<li>Don’t use <code>setwd</code>.</li>
<li>The formula operator <code>~</code> delays evaluation of its operand or operands.</li>
<li><code>~</code> was created to allow users to pass formulas into functions, but is used more generally to delay evaluation.</li>
<li>Some tidyverse functions define <code>.</code> to be the whole data, <code>.x</code> and <code>.y</code> to be the first and second arguments, and <code>..N</code> to be the N’th argument.</li>
<li>These convenience parameters are primarily used when the data being passed to a pipelined function needs to go somewhere other than in the first parameter’s slot.</li>
<li>‘Copy-on-modify’ means that data is aliased until something attempts to modify it, at which point it duplicated, so that data always appears to be unchanged.</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="oop.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="projects.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/gvwilson/tidynomicon/edit/master/debt.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["tidynomicon.pdf", "tidynomicon.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
